import { interactionTypes } from "@frak-labs/nexus-sdk/core";
import { formatUnits, sliceHex, toHex } from "viem";

/**
 * Get the storage pointer for each interaction type
 */
const storagePtr = Object.entries(interactionTypes).flatMap(([key, subType]) =>
    Object.entries(subType).map(([subKey, typeHash]) => ({
        key: `${key}.${subKey}`,
        typeHash,
        storagePtr: toHex(
            4565063857761385490119437627053249566272325275522255312643343188395n |
                BigInt(typeHash)
        ),
    }))
);

console.log("Values", storagePtr);

// 0x000000011f401388000000000000000000000000000000000de0b6b3a7640000
const storageValue =
    "0x000000011f401388000000000000000000000000000000000de0b6b3a7640000";
/*
        uint192 baseReward;
uint16 userPercent;
uint16 deperditionPerLevel;
uint16 maxCountPerUser;
 */

// Get the first 192 bits, representing the base reward
const baseRewardHex = sliceHex(storageValue, 32 - 24, 32);
console.log("Base reward", baseRewardHex);
console.log("Base reward", BigInt(baseRewardHex));
// On 18 decimals
console.log("Base reward", formatUnits(BigInt(baseRewardHex), 18));

// Why is this key updated everytimes? 0x010cc3b92b590e368f6e51c03042de6eb3d37f464929de3b3f869c37f1eb01ab
//

// 0x000000011f401388000000000000000000000000000000000
// 0x000000011f40138800000000000000000000000000000000

// 0x000000011f401388000000000000000000000000000000000de0b6b3a7640000
// 0x000000011f401388

// 0x0000000000001388000000000000000000000000000000000de0b6b3a7640000

// Maybe fcked up creation args for virginie campaign:
// 0x0000000000000000000000000000000000000000000000000000000000000020
// 56697267696e6965325f43616d706169676e000000000000000000000000000000
// 00000000000000000000009065cc978069782962df6ef49cf7c3a554f124860000
// 0000000000000000000000000000000000000000000000000000000000e0000000
// 0000000000000000000000000000000000000000000000ffffffffffff00000000
// 000000000000000000000000000000000000021e19e0c9bab24000000000000000
// 00000000000000000000000000000000000000000000006717d74b000000000000
// 00000000000000000000000000000000000000000000677325f000000000000000
// 00000000000000000000000000000000000000000000000001010cc3b900000000
// 000000000000000000000000000000000000000000000000000000000000000000
// 0000000000000000000000000000000de0b6b3a764000000000000000000000000
// 000000000000000000000000000000000000000013880000000000000000000000
// 000000000000000000000000000000000000001f40000000000000000000000000
// 0000000000000000000000000000000000000001
