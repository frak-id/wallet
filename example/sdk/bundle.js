"use strict";var NexusSDK=(()=>{var Qt=Object.create;var ce=Object.defineProperty;var er=Object.getOwnPropertyDescriptor;var tr=Object.getOwnPropertyNames;var rr=Object.getPrototypeOf,or=Object.prototype.hasOwnProperty;var Ze=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,o)=>(typeof require<"u"?require:t)[o]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var _=(e,t)=>()=>(e&&(t=e(e=0)),t);var Qe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),nr=(e,t)=>{for(var o in t)ce(e,o,{get:t[o],enumerable:!0})},et=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let f of tr(t))!or.call(e,f)&&f!==o&&ce(e,f,{get:()=>t[f],enumerable:!(n=er(t,f))||n.enumerable});return e};var pe=(e,t,o)=>(o=e!=null?Qt(rr(e)):{},et(t||!e||!e.__esModule?ce(o,"default",{value:e,enumerable:!0}):o,e)),ar=e=>et(ce({},"__esModule",{value:!0}),e);var Me=Qe((oe,Re)=>{"use strict";(function(e,t){if(typeof oe=="object"&&typeof Re=="object")Re.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var o=t();for(var n in o)(typeof oe=="object"?oe:e)[n]=o[n]}})(oe,()=>(()=>{"use strict";var e={48:function(o,n,f){var b=this&&this.__awaiter||function(a,h,r,s){return new(r||(r=Promise))(function(g,A){function l(i){try{B(s.next(i))}catch(c){A(c)}}function T(i){try{B(s.throw(i))}catch(c){A(c)}}function B(i){var c;i.done?g(i.value):(c=i.value,c instanceof r?c:new r(function(E){E(c)})).then(l,T)}B((s=s.apply(a,h||[])).next())})},I=this&&this.__generator||function(a,h){var r,s,g,A,l={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]};return A={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(A[Symbol.iterator]=function(){return this}),A;function T(B){return function(i){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;A&&(A=0,c[0]&&(l=0)),l;)try{if(r=1,s&&(g=2&c[0]?s.return:c[0]?s.throw||((g=s.return)&&g.call(s),0):s.next)&&!(g=g.call(s,c[1])).done)return g;switch(s=0,g&&(c=[2&c[0],g.value]),c[0]){case 0:case 1:g=c;break;case 4:return l.label++,{value:c[1],done:!1};case 5:l.label++,s=c[1],c=[0];continue;case 7:c=l.ops.pop(),l.trys.pop();continue;default:if(!((g=(g=l.trys).length>0&&g[g.length-1])||c[0]!==6&&c[0]!==2)){l=0;continue}if(c[0]===3&&(!g||c[1]>g[0]&&c[1]<g[3])){l.label=c[1];break}if(c[0]===6&&l.label<g[1]){l.label=g[1],g=c;break}if(g&&l.label<g[2]){l.label=g[2],l.ops.push(c);break}g[2]&&l.ops.pop(),l.trys.pop();continue}c=h.call(a,l)}catch(E){c=[6,E],s=0}finally{r=g=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([B,i])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.decompressFromUTF16=n.compressToUTF16=n.decompressFromBase64=n.compressToBase64=void 0;var v=f(304),p=f(134),F=new v.CompressorImpl,x=new p.DecompressorImpl,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d={};n.compressToBase64=function(a){return b(this,void 0,void 0,function(){var h;return I(this,function(r){switch(r.label){case 0:return a===null?[2,""]:[4,F.compress(a,6,function(s){return u.charAt(s)})];case 1:switch((h=r.sent()).length%4){default:case 0:return[2,h];case 1:return[2,h+"==="];case 2:return[2,h+"=="];case 3:return[2,h+"="]}return[2]}})})},n.decompressFromBase64=function(a){return b(this,void 0,void 0,function(){return I(this,function(h){switch(h.label){case 0:return a===null?[2,""]:a===""?[2,null]:[4,x.decompress(a.length,32,function(r){return function(s,g){if(!d[s]){d[s]={};for(var A=0;A<s.length;A++)d[s][s.charAt(A)]=A}return d[s][g]}(u,a.charAt(r))})];case 1:return[2,h.sent()]}})})},n.compressToUTF16=function(a){return b(this,void 0,void 0,function(){return I(this,function(h){switch(h.label){case 0:return a===null?[2,""]:[4,F.compress(a,15,function(r){return String.fromCharCode(r+32)})];case 1:return[2,h.sent()+" "]}})})},n.decompressFromUTF16=function(a){return b(this,void 0,void 0,function(){return I(this,function(h){switch(h.label){case 0:return a===null?[2,""]:a===""?[2,null]:[4,x.decompress(a.length,16384,function(r){return a.charCodeAt(r)-32})];case 1:return[2,h.sent()]}})})}},304:function(o,n,f){var b=this&&this.__awaiter||function(x,u,d,a){return new(d||(d=Promise))(function(h,r){function s(l){try{A(a.next(l))}catch(T){r(T)}}function g(l){try{A(a.throw(l))}catch(T){r(T)}}function A(l){var T;l.done?h(l.value):(T=l.value,T instanceof d?T:new d(function(B){B(T)})).then(s,g)}A((a=a.apply(x,u||[])).next())})},I=this&&this.__generator||function(x,u){var d,a,h,r,s={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return r={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(r[Symbol.iterator]=function(){return this}),r;function g(A){return function(l){return function(T){if(d)throw new TypeError("Generator is already executing.");for(;r&&(r=0,T[0]&&(s=0)),s;)try{if(d=1,a&&(h=2&T[0]?a.return:T[0]?a.throw||((h=a.return)&&h.call(a),0):a.next)&&!(h=h.call(a,T[1])).done)return h;switch(a=0,h&&(T=[2&T[0],h.value]),T[0]){case 0:case 1:h=T;break;case 4:return s.label++,{value:T[1],done:!1};case 5:s.label++,a=T[1],T=[0];continue;case 7:T=s.ops.pop(),s.trys.pop();continue;default:if(!((h=(h=s.trys).length>0&&h[h.length-1])||T[0]!==6&&T[0]!==2)){s=0;continue}if(T[0]===3&&(!h||T[1]>h[0]&&T[1]<h[3])){s.label=T[1];break}if(T[0]===6&&s.label<h[1]){s.label=h[1],h=T;break}if(h&&s.label<h[2]){s.label=h[2],s.ops.push(T);break}h[2]&&s.ops.pop(),s.trys.pop();continue}T=u.call(x,s)}catch(B){T=[6,B],a=0}finally{d=h=0}if(5&T[0])throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}([A,l])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.CompressorImpl=void 0;var v=f(658),p=[0,8,4,12,2,10,6,14,1,9,5,13,3,11,7,15],F=function(){function x(){}return x.writeValueToData=function(u,d,a,h,r){if(a%4!=0||u.dataPosition+a>h-1)for(var s=0;s<a;s++)u.dataVal=u.dataVal<<1|1&d,u.dataPosition==h-1?(u.dataPosition=0,u.data.push(r(u.dataVal)),u.dataVal=0):u.dataPosition++,d>>=1;else u.dataVal<<=a,u.dataVal|=function(g,A){for(var l=0,T=0;T<A;++T)l<<=4,l|=p[15&g],g>>=4;return l}(d,a/4),u.dataPosition+=a},x.writeWToDataVal=function(u,d,a){u.dictionaryToCreate.has(u.w)?(u.w.charCodeAt(0)<256?(x.writeValueToData(u,0,u.numBits,d,a),x.writeValueToData(u,u.w.charCodeAt(0),8,d,a)):(x.writeValueToData(u,1,u.numBits,d,a),x.writeValueToData(u,u.w.charCodeAt(0),16,d,a)),u.enlargeIn--,u.enlargeIn==0&&(u.enlargeIn=Math.pow(2,u.numBits),u.numBits++),u.dictionaryToCreate.delete(u.w)):x.writeValueToData(u,u.dictionary.get(u.w),u.numBits,d,a),u.enlargeIn--,u.enlargeIn==0&&(u.enlargeIn=Math.pow(2,u.numBits),u.numBits++)},x.loopIteration=function(u,d,a,h,r){var s=u.charAt(d);r.dictionary.has(s)||(r.dictionary.set(s,r.dictSize++),r.dictionaryToCreate.set(s,!0));var g=r.w+s;r.dictionary.has(g)?r.w=g:(this.writeWToDataVal(r,a,h),r.dictionary.set(g,r.dictSize++),r.w=String(s))},x.prototype.compress=function(u,d,a){var h=this;return new Promise(function(r){return b(h,void 0,void 0,function(){var s,g;return I(this,function(A){switch(A.label){case 0:if(u==null)return r(""),[2];s={data:[],dataPosition:0,dataVal:0,dictionary:new Map,dictionaryToCreate:new Map,dictSize:3,enlargeIn:2,numBits:2,w:""},g=0,A.label=1;case 1:return g<u.length?(x.loopIteration(u,g,d,a,s),g%1e4!=0?[3,3]:[4,(0,v.wait)()]):[3,4];case 2:A.sent(),A.label=3;case 3:return g+=1,[3,1];case 4:return s.w!==""&&x.writeWToDataVal(s,d,a),x.writeValueToData(s,2,s.numBits,d,a),s.dataVal<<=d-s.dataPosition,s.data.push(a(s.dataVal)),r(s.data.join("")),[2]}})})})},x}();n.CompressorImpl=F},134:function(o,n,f){var b=this&&this.__awaiter||function(F,x,u,d){return new(u||(u=Promise))(function(a,h){function r(A){try{g(d.next(A))}catch(l){h(l)}}function s(A){try{g(d.throw(A))}catch(l){h(l)}}function g(A){var l;A.done?a(A.value):(l=A.value,l instanceof u?l:new u(function(T){T(l)})).then(r,s)}g((d=d.apply(F,x||[])).next())})},I=this&&this.__generator||function(F,x){var u,d,a,h,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return h={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function s(g){return function(A){return function(l){if(u)throw new TypeError("Generator is already executing.");for(;h&&(h=0,l[0]&&(r=0)),r;)try{if(u=1,d&&(a=2&l[0]?d.return:l[0]?d.throw||((a=d.return)&&a.call(d),0):d.next)&&!(a=a.call(d,l[1])).done)return a;switch(d=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,d=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!((a=(a=r.trys).length>0&&a[a.length-1])||l[0]!==6&&l[0]!==2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=x.call(F,r)}catch(T){l=[6,T],d=0}finally{u=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([g,A])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.DecompressorImpl=void 0;var v=f(658),p=function(){function F(){}return F.prototype.decompress=function(x,u,d){var a=this;return new Promise(function(h){return b(a,void 0,void 0,function(){var r,s,g;return I(this,function(A){switch(A.label){case 0:for(r={bits:0,c:null,dataIndex:1,dataPosition:u,dataVal:d(0),dictionary:new Map,dictSize:4,enlargeIn:4,entry:"",maxPower:Math.pow(2,2),numBits:3,power:1,resb:null,result:[],w:null},s=0;s<3;s+=1)r.dictionary.set(s,s);for(;r.power!=r.maxPower;)r.resb=r.dataVal&r.dataPosition,r.dataPosition>>=1,r.dataPosition==0&&(r.dataPosition=u,r.dataVal=d(r.dataIndex++)),r.bits|=(r.resb>0?1:0)*r.power,r.power<<=1;switch(r.bits){case 0:for(r.bits=0,r.maxPower=Math.pow(2,8),r.power=1;r.power!=r.maxPower;)r.resb=r.dataVal&r.dataPosition,r.dataPosition>>=1,r.dataPosition==0&&(r.dataPosition=u,r.dataVal=d(r.dataIndex++)),r.bits|=(r.resb>0?1:0)*r.power,r.power<<=1;r.c=String.fromCharCode(r.bits);break;case 1:for(r.bits=0,r.maxPower=Math.pow(2,16),r.power=1;r.power!==r.maxPower;)r.resb=r.dataVal&r.dataPosition,r.dataPosition>>=1,r.dataPosition===0&&(r.dataPosition=u,r.dataVal=d(r.dataIndex++)),r.bits|=(r.resb>0?1:0)*r.power,r.power<<=1;r.c=String.fromCharCode(r.bits);break;case 2:return h(""),[2]}r.dictionary[3]=r.c,r.w=r.c,r.result.push(r.c),g=1,A.label=1;case 1:return g%2e4!=0?[3,3]:[4,(0,v.wait)()];case 2:A.sent(),A.label=3;case 3:if(r.dataIndex>x)return h(""),[2];for(r.bits=0,r.maxPower=Math.pow(2,r.numBits),r.power=1;r.power!=r.maxPower;)r.resb=r.dataVal&r.dataPosition,r.dataPosition>>=1,r.dataPosition==0&&(r.dataPosition=u,r.dataVal=d(r.dataIndex++)),r.bits|=(r.resb>0?1:0)*r.power,r.power<<=1;switch(r.c=r.bits){case 0:for(r.bits=0,r.maxPower=Math.pow(2,8),r.power=1;r.power!==r.maxPower;)r.resb=r.dataVal&r.dataPosition,r.dataPosition>>=1,r.dataPosition==0&&(r.dataPosition=u,r.dataVal=d(r.dataIndex++)),r.bits|=(r.resb>0?1:0)*r.power,r.power<<=1;r.dictionary[r.dictSize++]=String.fromCharCode(r.bits),r.c=r.dictSize-1,r.enlargeIn--;break;case 1:for(r.bits=0,r.maxPower=Math.pow(2,16),r.power=1;r.power!==r.maxPower;)r.resb=r.dataVal&r.dataPosition,r.dataPosition>>=1,r.dataPosition==0&&(r.dataPosition=u,r.dataVal=d(r.dataIndex++)),r.bits|=(r.resb>0?1:0)*r.power,r.power<<=1;r.dictionary[r.dictSize++]=String.fromCharCode(r.bits),r.c=r.dictSize-1,r.enlargeIn--;break;case 2:return h(r.result.join("")),[2]}if(r.enlargeIn==0&&(r.enlargeIn=Math.pow(2,r.numBits),r.numBits++),r.dictionary[r.c])r.entry=r.dictionary[r.c];else{if(r.c!==r.dictSize)return h(null),[2];r.entry=r.w+r.w.charAt(0)}return r.result.push(r.entry),r.dictionary[r.dictSize++]=r.w+r.entry.charAt(0),r.enlargeIn--,r.w=r.entry,r.enlargeIn==0&&(r.enlargeIn=Math.pow(2,r.numBits),r.numBits++),g++,[3,1];case 4:return[2]}})})})},F}();n.DecompressorImpl=p},658:function(o,n){var f=this&&this.__awaiter||function(I,v,p,F){return new(p||(p=Promise))(function(x,u){function d(r){try{h(F.next(r))}catch(s){u(s)}}function a(r){try{h(F.throw(r))}catch(s){u(s)}}function h(r){var s;r.done?x(r.value):(s=r.value,s instanceof p?s:new p(function(g){g(s)})).then(d,a)}h((F=F.apply(I,v||[])).next())})},b=this&&this.__generator||function(I,v){var p,F,x,u,d={label:0,sent:function(){if(1&x[0])throw x[1];return x[1]},trys:[],ops:[]};return u={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function a(h){return function(r){return function(s){if(p)throw new TypeError("Generator is already executing.");for(;u&&(u=0,s[0]&&(d=0)),d;)try{if(p=1,F&&(x=2&s[0]?F.return:s[0]?F.throw||((x=F.return)&&x.call(F),0):F.next)&&!(x=x.call(F,s[1])).done)return x;switch(F=0,x&&(s=[2&s[0],x.value]),s[0]){case 0:case 1:x=s;break;case 4:return d.label++,{value:s[1],done:!1};case 5:d.label++,F=s[1],s=[0];continue;case 7:s=d.ops.pop(),d.trys.pop();continue;default:if(!((x=(x=d.trys).length>0&&x[x.length-1])||s[0]!==6&&s[0]!==2)){d=0;continue}if(s[0]===3&&(!x||s[1]>x[0]&&s[1]<x[3])){d.label=s[1];break}if(s[0]===6&&d.label<x[1]){d.label=x[1],x=s;break}if(x&&d.label<x[2]){d.label=x[2],d.ops.push(s);break}x[2]&&d.ops.pop(),d.trys.pop();continue}s=v.call(I,d)}catch(g){s=[6,g],F=0}finally{p=x=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([h,r])}}};Object.defineProperty(n,"__esModule",{value:!0}),n.wait=void 0,n.wait=function(){return f(this,void 0,void 0,function(){return b(this,function(I){return[2,new Promise(function(v){setTimeout(v,0)})]})})}}},t={};return function o(n){var f=t[n];if(f!==void 0)return f.exports;var b=t[n]={exports:{}};return e[n].call(b.exports,b,b.exports,o),b.exports}(48)})())});var Be=Qe((zr,ue)=>{"use strict";(function(){"use strict";var e="input is invalid type",t=typeof window=="object",o=t?window:{};o.JS_SHA256_NO_WINDOW&&(t=!1);var n=!t&&typeof self=="object",f=!o.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;f?o=global:n&&(o=self);var b=!o.JS_SHA256_NO_COMMON_JS&&typeof ue=="object"&&ue.exports,I=typeof define=="function"&&define.amd,v=!o.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",p="0123456789abcdef".split(""),F=[-2147483648,8388608,32768,128],x=[24,16,8,0],u=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=["hex","array","digest","arrayBuffer"],a=[];(o.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(i){return Object.prototype.toString.call(i)==="[object Array]"}),v&&(o.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(i){return typeof i=="object"&&i.buffer&&i.buffer.constructor===ArrayBuffer});var h=function(i,c){return function(E){return new l(c,!0).update(E)[i]()}},r=function(i){var c=h("hex",i);f&&(c=s(c,i)),c.create=function(){return new l(i)},c.update=function(S){return c.create().update(S)};for(var E=0;E<d.length;++E){var w=d[E];c[w]=h(w,i)}return c},s=function(i,c){var E=Ze("crypto"),w=Ze("buffer").Buffer,S=c?"sha224":"sha256",y;w.from&&!o.JS_SHA256_NO_BUFFER_FROM?y=w.from:y=function(m){return new w(m)};var C=function(m){if(typeof m=="string")return E.createHash(S).update(m,"utf8").digest("hex");if(m==null)throw new Error(e);return m.constructor===ArrayBuffer&&(m=new Uint8Array(m)),Array.isArray(m)||ArrayBuffer.isView(m)||m.constructor===w?E.createHash(S).update(y(m)).digest("hex"):i(m)};return C},g=function(i,c){return function(E,w){return new T(E,c,!0).update(w)[i]()}},A=function(i){var c=g("hex",i);c.create=function(S){return new T(S,i)},c.update=function(S,y){return c.create(S).update(y)};for(var E=0;E<d.length;++E){var w=d[E];c[w]=g(w,i)}return c};function l(i,c){c?(a[0]=a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0,this.blocks=a):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],i?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=i}l.prototype.update=function(i){if(!this.finalized){var c,E=typeof i;if(E!=="string"){if(E==="object"){if(i===null)throw new Error(e);if(v&&i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(!Array.isArray(i)&&(!v||!ArrayBuffer.isView(i)))throw new Error(e)}else throw new Error(e);c=!0}for(var w,S=0,y,C=i.length,m=this.blocks;S<C;){if(this.hashed&&(this.hashed=!1,m[0]=this.block,this.block=m[16]=m[1]=m[2]=m[3]=m[4]=m[5]=m[6]=m[7]=m[8]=m[9]=m[10]=m[11]=m[12]=m[13]=m[14]=m[15]=0),c)for(y=this.start;S<C&&y<64;++S)m[y>>>2]|=i[S]<<x[y++&3];else for(y=this.start;S<C&&y<64;++S)w=i.charCodeAt(S),w<128?m[y>>>2]|=w<<x[y++&3]:w<2048?(m[y>>>2]|=(192|w>>>6)<<x[y++&3],m[y>>>2]|=(128|w&63)<<x[y++&3]):w<55296||w>=57344?(m[y>>>2]|=(224|w>>>12)<<x[y++&3],m[y>>>2]|=(128|w>>>6&63)<<x[y++&3],m[y>>>2]|=(128|w&63)<<x[y++&3]):(w=65536+((w&1023)<<10|i.charCodeAt(++S)&1023),m[y>>>2]|=(240|w>>>18)<<x[y++&3],m[y>>>2]|=(128|w>>>12&63)<<x[y++&3],m[y>>>2]|=(128|w>>>6&63)<<x[y++&3],m[y>>>2]|=(128|w&63)<<x[y++&3]);this.lastByteIndex=y,this.bytes+=y-this.start,y>=64?(this.block=m[16],this.start=y-64,this.hash(),this.hashed=!0):this.start=y}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},l.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var i=this.blocks,c=this.lastByteIndex;i[16]=this.block,i[c>>>2]|=F[c&3],this.block=i[16],c>=56&&(this.hashed||this.hash(),i[0]=this.block,i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),i[14]=this.hBytes<<3|this.bytes>>>29,i[15]=this.bytes<<3,this.hash()}},l.prototype.hash=function(){var i=this.h0,c=this.h1,E=this.h2,w=this.h3,S=this.h4,y=this.h5,C=this.h6,m=this.h7,P=this.blocks,M,z,N,W,R,K,q,re,Ce,Pe,se;for(M=16;M<64;++M)R=P[M-15],z=(R>>>7|R<<25)^(R>>>18|R<<14)^R>>>3,R=P[M-2],N=(R>>>17|R<<15)^(R>>>19|R<<13)^R>>>10,P[M]=P[M-16]+z+P[M-7]+N<<0;for(se=c&E,M=0;M<64;M+=4)this.first?(this.is224?(re=300032,R=P[0]-1413257819,m=R-150054599<<0,w=R+24177077<<0):(re=704751109,R=P[0]-210244248,m=R-1521486534<<0,w=R+143694565<<0),this.first=!1):(z=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),N=(S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7),re=i&c,W=re^i&E^se,q=S&y^~S&C,R=m+N+q+u[M]+P[M],K=z+W,m=w+R<<0,w=R+K<<0),z=(w>>>2|w<<30)^(w>>>13|w<<19)^(w>>>22|w<<10),N=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),Ce=w&i,W=Ce^w&c^re,q=m&S^~m&y,R=C+N+q+u[M+1]+P[M+1],K=z+W,C=E+R<<0,E=R+K<<0,z=(E>>>2|E<<30)^(E>>>13|E<<19)^(E>>>22|E<<10),N=(C>>>6|C<<26)^(C>>>11|C<<21)^(C>>>25|C<<7),Pe=E&w,W=Pe^E&i^Ce,q=C&m^~C&S,R=y+N+q+u[M+2]+P[M+2],K=z+W,y=c+R<<0,c=R+K<<0,z=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),N=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7),se=c&E,W=se^c&w^Pe,q=y&C^~y&m,R=S+N+q+u[M+3]+P[M+3],K=z+W,S=i+R<<0,i=R+K<<0,this.chromeBugWorkAround=!0;this.h0=this.h0+i<<0,this.h1=this.h1+c<<0,this.h2=this.h2+E<<0,this.h3=this.h3+w<<0,this.h4=this.h4+S<<0,this.h5=this.h5+y<<0,this.h6=this.h6+C<<0,this.h7=this.h7+m<<0},l.prototype.hex=function(){this.finalize();var i=this.h0,c=this.h1,E=this.h2,w=this.h3,S=this.h4,y=this.h5,C=this.h6,m=this.h7,P=p[i>>>28&15]+p[i>>>24&15]+p[i>>>20&15]+p[i>>>16&15]+p[i>>>12&15]+p[i>>>8&15]+p[i>>>4&15]+p[i&15]+p[c>>>28&15]+p[c>>>24&15]+p[c>>>20&15]+p[c>>>16&15]+p[c>>>12&15]+p[c>>>8&15]+p[c>>>4&15]+p[c&15]+p[E>>>28&15]+p[E>>>24&15]+p[E>>>20&15]+p[E>>>16&15]+p[E>>>12&15]+p[E>>>8&15]+p[E>>>4&15]+p[E&15]+p[w>>>28&15]+p[w>>>24&15]+p[w>>>20&15]+p[w>>>16&15]+p[w>>>12&15]+p[w>>>8&15]+p[w>>>4&15]+p[w&15]+p[S>>>28&15]+p[S>>>24&15]+p[S>>>20&15]+p[S>>>16&15]+p[S>>>12&15]+p[S>>>8&15]+p[S>>>4&15]+p[S&15]+p[y>>>28&15]+p[y>>>24&15]+p[y>>>20&15]+p[y>>>16&15]+p[y>>>12&15]+p[y>>>8&15]+p[y>>>4&15]+p[y&15]+p[C>>>28&15]+p[C>>>24&15]+p[C>>>20&15]+p[C>>>16&15]+p[C>>>12&15]+p[C>>>8&15]+p[C>>>4&15]+p[C&15];return this.is224||(P+=p[m>>>28&15]+p[m>>>24&15]+p[m>>>20&15]+p[m>>>16&15]+p[m>>>12&15]+p[m>>>8&15]+p[m>>>4&15]+p[m&15]),P},l.prototype.toString=l.prototype.hex,l.prototype.digest=function(){this.finalize();var i=this.h0,c=this.h1,E=this.h2,w=this.h3,S=this.h4,y=this.h5,C=this.h6,m=this.h7,P=[i>>>24&255,i>>>16&255,i>>>8&255,i&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,E>>>24&255,E>>>16&255,E>>>8&255,E&255,w>>>24&255,w>>>16&255,w>>>8&255,w&255,S>>>24&255,S>>>16&255,S>>>8&255,S&255,y>>>24&255,y>>>16&255,y>>>8&255,y&255,C>>>24&255,C>>>16&255,C>>>8&255,C&255];return this.is224||P.push(m>>>24&255,m>>>16&255,m>>>8&255,m&255),P},l.prototype.array=l.prototype.digest,l.prototype.arrayBuffer=function(){this.finalize();var i=new ArrayBuffer(this.is224?28:32),c=new DataView(i);return c.setUint32(0,this.h0),c.setUint32(4,this.h1),c.setUint32(8,this.h2),c.setUint32(12,this.h3),c.setUint32(16,this.h4),c.setUint32(20,this.h5),c.setUint32(24,this.h6),this.is224||c.setUint32(28,this.h7),i};function T(i,c,E){var w,S=typeof i;if(S==="string"){var y=[],C=i.length,m=0,P;for(w=0;w<C;++w)P=i.charCodeAt(w),P<128?y[m++]=P:P<2048?(y[m++]=192|P>>>6,y[m++]=128|P&63):P<55296||P>=57344?(y[m++]=224|P>>>12,y[m++]=128|P>>>6&63,y[m++]=128|P&63):(P=65536+((P&1023)<<10|i.charCodeAt(++w)&1023),y[m++]=240|P>>>18,y[m++]=128|P>>>12&63,y[m++]=128|P>>>6&63,y[m++]=128|P&63);i=y}else if(S==="object"){if(i===null)throw new Error(e);if(v&&i.constructor===ArrayBuffer)i=new Uint8Array(i);else if(!Array.isArray(i)&&(!v||!ArrayBuffer.isView(i)))throw new Error(e)}else throw new Error(e);i.length>64&&(i=new l(c,!0).update(i).array());var M=[],z=[];for(w=0;w<64;++w){var N=i[w]||0;M[w]=92^N,z[w]=54^N}l.call(this,c,E),this.update(z),this.oKeyPad=M,this.inner=!0,this.sharedMemory=E}T.prototype=new l,T.prototype.finalize=function(){if(l.prototype.finalize.call(this),this.inner){this.inner=!1;var i=this.array();l.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(i),l.prototype.finalize.call(this)}};var B=r();B.sha256=B,B.sha224=r(!0),B.sha256.hmac=A(),B.sha224.hmac=A(!0),b?ue.exports=B:(o.sha256=B.sha256,o.sha224=B.sha224,I&&define(function(){return B}))})()});function ee(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}var xe=_(()=>{"use strict"});function Ne(e){return ee(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}var ft=_(()=>{"use strict";xe()});var De,ut=_(()=>{"use strict";De="2.21.6"});function lt(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e?lt(e.cause,t):t?null:e}var Oe,$,he=_(()=>{"use strict";ut();Oe={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:o})=>t?`${e??"https://viem.sh"}${t}${o?`#${o}`:""}`:void 0,version:De},$=class e extends Error{constructor(t,o={}){let n=o.cause instanceof e?o.cause.details:o.cause?.message?o.cause.message:o.details,f=o.cause instanceof e&&o.cause.docsPath||o.docsPath,b=Oe.getDocsUrl?.({...o,docsPath:f}),I=[t||"An error occurred.","",...o.metaMessages?[...o.metaMessages,""]:[],...b?[`Docs: ${b}`]:[],...n?[`Details: ${n}`]:[],...Oe.version?[`Version: ${Oe.version}`]:[]].join(`
`);super(I,o.cause?{cause:o.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=f,this.metaMessages=o.metaMessages,this.name=o.name??this.name,this.shortMessage=t,this.version=De}walk(t){return lt(this,t)}}});var ne,dt=_(()=>{"use strict";he();ne=class extends ${constructor({size:t,targetSize:o,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${t}) exceeds padding size (${o}).`,{name:"SizeExceedsPaddingSizeError"})}}});function H(e,{dir:t,size:o=32}={}){return typeof e=="string"?mt(e,{dir:t,size:o}):xt(e,{dir:t,size:o})}function mt(e,{dir:t,size:o=32}={}){if(o===null)return e;let n=e.replace("0x","");if(n.length>o*2)throw new ne({size:Math.ceil(n.length/2),targetSize:o,type:"hex"});return`0x${n[t==="right"?"padEnd":"padStart"](o*2,"0")}`}function xt(e,{dir:t,size:o=32}={}){if(o===null)return e;if(e.length>o)throw new ne({size:e.length,targetSize:o,type:"bytes"});let n=new Uint8Array(o);for(let f=0;f<o;f++){let b=t==="right";n[b?f:o-f-1]=e[b?f:e.length-f-1]}return n}var ye=_(()=>{"use strict";dt()});var be,we,Ve=_(()=>{"use strict";he();be=class extends ${constructor({max:t,min:o,signed:n,size:f,value:b}){super(`Number "${b}" is not in safe ${f?`${f*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${t?`(${o} to ${t})`:`(above ${o})`}`,{name:"IntegerOutOfRangeError"})}},we=class extends ${constructor({givenSize:t,maxSize:o}){super(`Size cannot exceed ${o} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}}});function Y(e,{size:t}){if(Ne(e)>t)throw new we({givenSize:Ne(e),maxSize:t})}var $e=_(()=>{"use strict";Ve();ft()});function U(e,t={}){return typeof e=="number"||typeof e=="bigint"?ge(e,t):typeof e=="string"?yt(e,t):typeof e=="boolean"?ht(e,t):je(e,t)}function ht(e,t={}){let o=`0x${Number(e)}`;return typeof t.size=="number"?(Y(o,{size:t.size}),H(o,{size:t.size})):o}function je(e,t={}){let o="";for(let f=0;f<e.length;f++)o+=cr[e[f]];let n=`0x${o}`;return typeof t.size=="number"?(Y(n,{size:t.size}),H(n,{dir:"right",size:t.size})):n}function ge(e,t={}){let{signed:o,size:n}=t,f=BigInt(e),b;n?o?b=(1n<<BigInt(n)*8n-1n)-1n:b=2n**(BigInt(n)*8n)-1n:typeof e=="number"&&(b=BigInt(Number.MAX_SAFE_INTEGER));let I=typeof b=="bigint"&&o?-b-1n:0;if(b&&f>b||f<I){let p=typeof e=="bigint"?"n":"";throw new be({max:b?`${b}${p}`:void 0,min:`${I}${p}`,signed:o,size:n,value:`${e}${p}`})}let v=`0x${(o&&f<0?(1n<<BigInt(n*8))+BigInt(f):f).toString(16)}`;return n?H(v,{size:n}):v}function yt(e,t={}){let o=pr.encode(e);return je(o,t)}var cr,pr,Ie=_(()=>{"use strict";Ve();ye();$e();cr=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));pr=new TextEncoder});function wt(e,t={}){return typeof e=="number"||typeof e=="bigint"?lr(e,t):typeof e=="boolean"?ur(e,t):ee(e)?gt(e,t):dr(e,t)}function ur(e,t={}){let o=new Uint8Array(1);return o[0]=Number(e),typeof t.size=="number"?(Y(o,{size:t.size}),H(o,{size:t.size})):o}function bt(e){if(e>=j.zero&&e<=j.nine)return e-j.zero;if(e>=j.A&&e<=j.F)return e-(j.A-10);if(e>=j.a&&e<=j.f)return e-(j.a-10)}function gt(e,t={}){let o=e;t.size&&(Y(o,{size:t.size}),o=H(o,{dir:"right",size:t.size}));let n=o.slice(2);n.length%2&&(n=`0${n}`);let f=n.length/2,b=new Uint8Array(f);for(let I=0,v=0;I<f;I++){let p=bt(n.charCodeAt(v++)),F=bt(n.charCodeAt(v++));if(p===void 0||F===void 0)throw new $(`Invalid byte sequence ("${n[v-2]}${n[v-1]}" in "${n}").`);b[I]=p*16+F}return b}function lr(e,t){let o=ge(e,t);return gt(o)}function dr(e,t={}){let o=fr.encode(e);return typeof t.size=="number"?(Y(o,{size:t.size}),H(o,{dir:"right",size:t.size})):o}var fr,j,It=_(()=>{"use strict";he();xe();ye();$e();Ie();fr=new TextEncoder;j={zero:48,nine:57,A:65,F:70,a:97,f:102}});function We(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function mr(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function ae(e,...t){if(!mr(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Ke(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function Tt(e,t){ae(e);let o=t.outputLen;if(e.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}var qe=_(()=>{"use strict"});function xr(e,t=!1){return t?{h:Number(e&Te),l:Number(e>>Et&Te)}:{h:Number(e>>Et&Te)|0,l:Number(e&Te)|0}}function vt(e,t=!1){let o=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let f=0;f<e.length;f++){let{h:b,l:I}=xr(e[f],t);[o[f],n[f]]=[b,I]}return[o,n]}var Te,Et,St,Ft,At,Ct,Pt=_(()=>{"use strict";Te=BigInt(4294967295),Et=BigInt(32);St=(e,t,o)=>e<<o|t>>>32-o,Ft=(e,t,o)=>t<<o|e>>>32-o,At=(e,t,o)=>t<<o-32|e>>>64-o,Ct=(e,t,o)=>e<<o-32|t>>>64-o});function Ge(e){for(let t=0;t<e.length;t++)e[t]=hr(e[t])}function yr(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ve(e){return typeof e=="string"&&(e=yr(e)),ae(e),e}function Mt(e){let t=n=>e().update(ve(n)).digest(),o=e();return t.outputLen=o.outputLen,t.blockLen=o.blockLen,t.create=()=>e(),t}function Bt(e){let t=(n,f)=>e(f).update(ve(n)).digest(),o=e({});return t.outputLen=o.outputLen,t.blockLen=o.blockLen,t.create=n=>e(n),t}var Rt,Je,hr,Ee,nn,kt=_(()=>{"use strict";qe();Rt=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),Je=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68,hr=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255;Ee=class{clone(){return this._cloneInto()}},nn={}.toString});function Sr(e,t=24){let o=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let I=0;I<10;I++)o[I]=e[I]^e[I+10]^e[I+20]^e[I+30]^e[I+40];for(let I=0;I<10;I+=2){let v=(I+8)%10,p=(I+2)%10,F=o[p],x=o[p+1],u=Ht(F,x,1)^o[v],d=_t(F,x,1)^o[v+1];for(let a=0;a<50;a+=10)e[I+a]^=u,e[I+a+1]^=d}let f=e[2],b=e[3];for(let I=0;I<24;I++){let v=Ut[I],p=Ht(f,b,v),F=_t(f,b,v),x=Lt[I];f=e[x],b=e[x+1],e[x]=p,e[x+1]=F}for(let I=0;I<50;I+=10){for(let v=0;v<10;v++)o[v]=e[I+v];for(let v=0;v<10;v++)e[I+v]^=~o[(v+2)%10]&o[(v+4)%10]}e[0]^=Er[n],e[1]^=vr[n]}o.fill(0)}var Lt,Ut,zt,br,ie,wr,gr,Ir,Tr,Er,vr,Ht,_t,Se,J,fn,un,ln,dn,mn,Nt,xn,hn,Dt,yn,bn,Ot=_(()=>{"use strict";qe();Pt();kt();Lt=[],Ut=[],zt=[],br=BigInt(0),ie=BigInt(1),wr=BigInt(2),gr=BigInt(7),Ir=BigInt(256),Tr=BigInt(113);for(let e=0,t=ie,o=1,n=0;e<24;e++){[o,n]=[n,(2*o+3*n)%5],Lt.push(2*(5*n+o)),Ut.push((e+1)*(e+2)/2%64);let f=br;for(let b=0;b<7;b++)t=(t<<ie^(t>>gr)*Tr)%Ir,t&wr&&(f^=ie<<(ie<<BigInt(b))-ie);zt.push(f)}[Er,vr]=vt(zt,!0),Ht=(e,t,o)=>o>32?At(e,t,o):St(e,t,o),_t=(e,t,o)=>o>32?Ct(e,t,o):Ft(e,t,o);Se=class e extends Ee{constructor(t,o,n,f=!1,b=24){if(super(),this.blockLen=t,this.suffix=o,this.outputLen=n,this.enableXOF=f,this.rounds=b,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,We(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=Rt(this.state)}keccak(){Je||Ge(this.state32),Sr(this.state32,this.rounds),Je||Ge(this.state32),this.posOut=0,this.pos=0}update(t){Ke(this);let{blockLen:o,state:n}=this;t=ve(t);let f=t.length;for(let b=0;b<f;){let I=Math.min(o-this.pos,f-b);for(let v=0;v<I;v++)n[this.pos++]^=t[b++];this.pos===o&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:t,suffix:o,pos:n,blockLen:f}=this;t[n]^=o,o&128&&n===f-1&&this.keccak(),t[f-1]^=128,this.keccak()}writeInto(t){Ke(this,!1),ae(t),this.finish();let o=this.state,{blockLen:n}=this;for(let f=0,b=t.length;f<b;){this.posOut>=n&&this.keccak();let I=Math.min(n-this.posOut,b-f);t.set(o.subarray(this.posOut,this.posOut+I),f),this.posOut+=I,f+=I}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return We(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(Tt(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){let{blockLen:o,suffix:n,outputLen:f,rounds:b,enableXOF:I}=this;return t||(t=new e(o,n,f,I,b)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=b,t.suffix=n,t.outputLen=f,t.enableXOF=I,t.destroyed=this.destroyed,t}},J=(e,t,o)=>Mt(()=>new Se(t,e,o)),fn=J(6,144,224/8),un=J(6,136,256/8),ln=J(6,104,384/8),dn=J(6,72,512/8),mn=J(1,144,224/8),Nt=J(1,136,256/8),xn=J(1,104,384/8),hn=J(1,72,512/8),Dt=(e,t,o)=>Bt((n={})=>new Se(t,e,n.dkLen===void 0?o:n.dkLen,!0)),yn=Dt(31,168,128/8),bn=Dt(31,136,256/8)});function Xe(e,t){let o=t||"hex",n=Nt(ee(e,{strict:!1})?wt(e):e);return o==="bytes"?n:U(n)}var Vt=_(()=>{"use strict";Ot();xe();It();Ie()});function V(e){return`0x${e.reduce((t,o)=>t+o.replace("0x",""),"")}`}var $t=_(()=>{"use strict"});var Br={};nr(Br,{FrakRpcError:()=>k,NexusContextManager:()=>ze,PressInteractionEncoder:()=>Xt,PurchaseInteractionEncoder:()=>Zt,ReferralInteractionEncoder:()=>Yt,RpcErrorCodes:()=>L,createIFrameNexusClient:()=>Ue,createIframe:()=>_e,decompressDataAndCheckHash:()=>X,displayModal:()=>te,hashAndCompressData:()=>G,interactionTypes:()=>O,openSso:()=>qt,productTypes:()=>D,productTypesMask:()=>ct,sendInteraction:()=>Kt,sendTransaction:()=>Gt,siweAuthenticate:()=>Jt,watchWalletStatus:()=>pt});var k=class extends Error{constructor(o,n,f){super(n);this.code=o;this.data=f}};var fe=class extends k{constructor(t){super(L.internalError,t)}};var L={parseError:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internalError:-32603,serverError:-32e3,clientNotConnected:-32001,configError:-32002,corruptedResponse:-32003,clientAborted:-32004,walletNotConnected:-32005,noInteractionSession:-32006};var Z=class{_promise;_resolve;_reject;constructor(){this._promise=new Promise((t,o)=>{this._resolve=t,this._reject=o})}get promise(){return this._promise}resolve=t=>{this._resolve?.(t)};reject=t=>{this._reject?.(t)}};var tt=pe(Me(),1),ke=pe(Be(),1);async function G(e){let t=(0,ke.sha256)(JSON.stringify(e)),o={...e,validationHash:t},n=await le(o),f=(0,ke.sha256)(n);return{compressed:n,compressedHash:f}}async function le(e){return(0,tt.compressToBase64)(JSON.stringify(e))}var rt=pe(Me(),1),He=pe(Be(),1);async function X(e){if(!(e?.compressed&&e?.compressedHash))throw new k(L.corruptedResponse,"Missing compressed data");let t=await de(e.compressed);if(!t)throw new k(L.corruptedResponse,"Invalid compressed data");if(!t?.validationHash)throw new k(L.corruptedResponse,"Missing validation hash");if((0,He.sha256)(e.compressed)!==e.compressedHash)throw new k(L.corruptedResponse,"Invalid compressed hash");let{validationHash:n,...f}=t;if((0,He.sha256)(JSON.stringify(f))!==t.validationHash)throw new k(L.corruptedResponse,"Invalid data validation hash");return t}async function de(e){let t=await(0,rt.decompressFromBase64)(e);try{return JSON.parse(t)}catch(o){return console.error("Invalid compressed data",o),null}}var Q="nexus-wallet-backup";function ot(){let e=new Map;return{createChannel:t=>{let o=Math.random().toString(36).substring(7);return e.set(o,t),o},getRpcResolver:t=>e.get(t),removeChannel:t=>e.delete(t),destroy:()=>e.clear()}}var me={id:"nexus-wallet",name:"nexus-wallet",allow:"publickey-credentials-get *; clipboard-write; web-share *",style:{width:"0",height:"0",border:"0",position:"absolute",zIndex:1e3,top:"-1000px",left:"-1000px"}};function _e({walletBaseUrl:e}){if(document.querySelector("#nexus-wallet"))return Promise.resolve(void 0);let o=document.createElement("iframe");return o.id=me.id,o.name=me.name,o.allow=me.allow,o.style.zIndex=me.style.zIndex.toString(),Le({iframe:o,isVisible:!1}),document.body.appendChild(o),new Promise(n=>{o?.addEventListener("load",()=>n(o)),o.src=`${e}/listener`})}function Le({iframe:e,isVisible:t}){if(!t){e.style.width="0",e.style.height="0",e.style.border="0",e.style.position="fixed",e.style.top="-1000px",e.style.left="-1000px";return}e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.pointerEvents="auto"}function nt({iframe:e}){let t=new Z;return{handleEvent:async n=>{switch(n.iframeLifecycle){case"connected":t.resolve(!0);break;case"do-backup":n.data.backup?localStorage.setItem(Q,n.data.backup):localStorage.removeItem(Q);break;case"remove-backup":localStorage.removeItem(Q);break;case"show":case"hide":Le({iframe:e,isVisible:n.iframeLifecycle==="show"});break}},isConnected:t.promise}}function at({nexusWalletUrl:e,iframe:t,channelManager:o,iframeLifecycleManager:n}){if(typeof window>"u")throw new k(L.configError,"iframe client should be used in the browser");if(!t.contentWindow)throw new k(L.configError,"The iframe does not have a product window");let f=t.contentWindow,b=async p=>{if(!p.origin||new URL(p.origin).origin.toLowerCase()!==new URL(e).origin.toLowerCase())return;if("iframeLifecycle"in p.data){await n.handleEvent(p.data);return}if("clientLifecycle"in p.data){console.error("Client lifecycle event received on the client side, dismissing it");return}let F=p.data.id,x=o.getRpcResolver(F);x&&await x(p.data)};return window.addEventListener("message",b),{sendEvent:p=>{f.postMessage(p,{targetOrigin:e})},cleanup:()=>{window.removeEventListener("message",b)}}}function Ue({config:e,iframe:t}){let o=ot(),n=nt({iframe:t}),f=at({nexusWalletUrl:e.walletUrl,iframe:t,channelManager:o,iframeLifecycleManager:n}),b=async F=>{if(!await n.isConnected)throw new k(L.clientNotConnected,"The iframe provider isn't connected yet");let u=new Z,d=o.createChannel(async h=>{let r=await X(h.data);r.error?u.reject(new k(r.error.code,r.error.message,r.error?.data)):u.resolve(r.result),o.removeChannel(d)}),a=await G(F);return f.sendEvent({id:d,topic:F.method,data:a}),u.promise},I=async(F,x)=>{if(!await n.isConnected)throw new k(L.clientNotConnected,"The iframe provider isn't connected yet");let d=o.createChannel(async h=>{let r=await X(h.data);if(r.result)x(r.result);else throw new fe("No valid result in the response")}),a=await G(F);f.sendEvent({id:d,topic:F.method,data:a})},v=async()=>{o.destroy(),f.cleanup(),t.remove()},p=ir({config:e,messageHandler:f,lifecycleManager:n});return{config:e,waitForConnection:n.isConnected,waitForSetup:p,request:b,listenerRequest:I,destroy:v}}async function ir({config:e,messageHandler:t,lifecycleManager:o}){await o.isConnected;let n=async()=>{let b=e.metadata.css;b&&t.sendEvent({clientLifecycle:"modal-css",data:{cssLink:b}})},f=async()=>{if(typeof window>"u")return;let b=window.localStorage.getItem(Q);b&&t.sendEvent({clientLifecycle:"restore-backup",data:{backup:b}})};await Promise.all([n(),f()])}var it="nCtx";async function st({url:e}){if(!e)return null;let o=new URL(e).searchParams.get(it);if(!o)return null;let n=await de(o);return n||null}async function sr({url:e,context:t}){if(!e)return null;let o=await st({url:e}),n=o?{...o,...t}:t,f=await le(n);if(!f)return;let b=new URL(e);return b.searchParams.set(it,f),b.toString()}var ze={parse:st,update:sr};var D={dapp:1,press:2,webshop:3,referral:30,purchase:31},ct=Object.entries(D).reduce((e,[t,o])=>(e[t]=BigInt(1)<<BigInt(o),e),{});var O={press:{openArticle:"0xc0a24ffb",readArticle:"0xd5bd0fbe"},dapp:{proofVerifiableStorageUpdate:"0x2ab2aeef",callableVerifiableStorageUpdate:"0xa07da986"},webshop:{},referral:{referred:"0x010cc3b9",createLink:"0xb2c0f17c"},purchase:{started:"0xd87e90c3",completed:"0x8403aeb4"}};function pt(e,t){return e.listenerRequest({method:"frak_listenToWalletStatus"},t)}var Fe=256,Ae;function jt(e=11){if(!Ae||Fe+e>256*2){Ae="",Fe=0;for(let t=0;t<256;t++)Ae+=(256+Math.random()*256|0).toString(16).substring(1)}return Ae.substring(Fe,Fe+++e)}Ie();$t();Vt();ye();function Wt({domain:e}){return Xe(U(e))}async function Kt(e,{productId:t,interaction:o,validation:n}){let f=t??Wt(e.config);return await e.request({method:"frak_sendInteraction",params:[f,o,n]})}async function te(e,{steps:t,metadata:o}){return await e.request({method:"frak_displayModal",params:[t,e.config.metadata.name,o]})}async function qt(e,t){let{metadata:o}=e.config;await e.request({method:"frak_sso",params:[t,o.name,o.css]})}function Ye(){return jt(96)}async function Jt(e,{siwe:t,metadata:o}){let n=t?.statement??`I confirm that I want to use my Nexus wallet on: ${e.config.metadata.name}`,f={...t,statement:n,nonce:t?.nonce??Ye(),uri:t?.uri??`https://${e.config.domain}`,version:t?.version??"1",domain:e.config.domain};return(await te(e,{metadata:o,steps:{login:{},siweAuthenticate:{siwe:f}}})).siweAuthenticate}async function Gt(e,{tx:t,metadata:o}){return(await te(e,{metadata:o,steps:{login:{},sendTransaction:{tx:t}}})).sendTransaction}function Fr({articleId:e}){let t=V([O.press.openArticle,H(e,{size:32})]);return{handlerTypeDenominator:U(D.press),interactionData:t}}function Ar({articleId:e}){let t=V([O.press.readArticle,H(e,{size:32})]);return{handlerTypeDenominator:U(D.press),interactionData:t}}var Xt={openArticle:Fr,readArticle:Ar};function Cr(){let e=V([O.referral.createLink,"0x"]);return{handlerTypeDenominator:U(D.referral),interactionData:e}}function Pr({referrer:e}){let t=V([O.referral.referred,H(e,{size:32})]);return{handlerTypeDenominator:U(D.referral),interactionData:t}}var Yt={createLink:Cr,referred:Pr};function Rr({purchaseId:e}){let t=V([O.purchase.started,H(e,{size:32})]);return{handlerTypeDenominator:U(D.referral),interactionData:t}}function Mr({purchaseId:e}){let t=V([O.purchase.completed,H(e,{size:32})]);return{handlerTypeDenominator:U(D.referral),interactionData:t}}var Zt={startPurchase:Rr,completedPurchase:Mr};return ar(Br);})();
/*! Bundled license information:

js-sha256/src/sha256.js:
  (**
   * [js-sha256]{@link https://github.com/emn178/js-sha256}
   *
   * @version 0.11.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2024
   * @license MIT
   *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/
