---
description: This rule apply to business dashboard app.
globs: apps/business/**/*.ts, apps/business/**/*.tsx
---
# Business Dashboard Rules

## Business Dashboard Summary

`apps/business` is part of Frak monorepo and provides a comprehensive business dashboard solution built with TanStack Start. It integrates with blockchain functionalities, user authentication mechanisms, and campaign management features.

Project is written in TypeScript using React 19, TanStack Start, TanStack Router for routing, TanStack Query for server state management, Zustand for client state management, Viem and Wagmi for blockchain, Radix UI for components, and CSS Modules for styling.

## State Management

- Business dashboard uses Zustand for global client state
- Store files located in `apps/business/src/stores/`
- All stores must include "use client" directive at the top
- Stores use persist middleware for localStorage synchronization
- Best practices:
  - Use individual selectors: `const value = store((state) => state.value)`
  - Avoid whole-store subscriptions: `const { value } = store()` causes unnecessary re-renders
  - Support functional updates when needed: `setFilters((prev) => ({ ...prev, newValue }))`

## Technical Stack

- TanStack Start for full-stack React framework with SSR
- TanStack Router for routing
- Vite for development and build
- Nitro for production server output
- CSS Modules for styling (no Tailwind)

## Architecture

- Module-based architecture in `src/module/` directory
- File-based routing in `src/routes/` directory
- Server functions using TanStack Start conventions
- MongoDB integration for data persistence
- Iron Session for authentication

## Resource Tags

Use these tags to find relevant documentation and resources:

- @TanStackRouter - TanStack Router documentation and resources
- @TanStackStart - TanStack Start framework documentation
- @RadixUI - An open-source UI component library

## Key Principles

- You are an expert in TypeScript, TanStack Start, React, Radix UI and CSS modules.
- Use Server Functions for data fetching when possible
- Leverage TanStack Router loaders for route-level data fetching
- Follow React Server Components patterns where applicable

##  Performance Optimization

- Minimize 'use client' directives
- Use TanStack Router loaders for data fetching
- Leverage route-level code splitting
- Optimize bundle size using Vite's built-in features

## Structure

- Structure project files as follows:
```
src/
├── assets/ # Static assets
├── components/ # Shared React components
├── context/ # React context providers (auth, blockchain, etc.)
├── middleware/ # Server middleware
├── mock/ # Mock data for development
├── module/ # Feature modules organized by domain
├── polyfill/ # Runtime polyfills
├── routes/ # TanStack Router file-based routes
├── router.tsx # Router configuration
├── routeTree.gen.ts # Generated route tree (auto-generated)
├── stores/ # Zustand stores for client state
├── styles/ # Global styles and CSS modules
└── types/ # TypeScript type definitions
```

## Key Conventions

- Use Server Functions for API calls
- Leverage file-based routing in `src/routes/`
- Organize feature modules in `src/module/`
- Use CSS Modules for all styling
- Follow TanStack Start conventions for data loading

Follow TanStack Start docs for Data Fetching, Routing, and Server Functions.
